extends ../layouts/base.pug
include ../mixins/comment-mixin.pug

block content 
    div.notice__main 
        div.notice__main-header
            span=steam.owner.userid 
            span=String(steam.createAt).substr(4,20)
            span 조회: #{steam.views}
        div.notice__main-header__menu
            div
                case steam.genre
                    when 0
                        span [액션]
                    when 1
                        span [RPG]
                    when 2
                        span [퍼즐]
                    when 3
                        span [어드벤쳐]
                    when 4
                        span [시뮬레이션]
                    when 5
                        span [음악]
                    when 6
                        span [스포츠]
                    when 7
                        span [아케이드]            
                span  | 
                case steam.age
                    when 0
                        span [전체이용가]
                    when 1
                        span [12세이용가]
                    when 2
                        span [15세이용가]
                    when 3
                        span [청소년이용불가]
                    when 4
                        span [시험용]
                    when 5
                        span [등급면제]
            div
                if loggedInUser._id === String(steam.owner._id)
                    a(href=`/steam/${steam._id}/modify`) 수정 
                    span | 
                    a(href=`/steam/${steam._id}/delete`) 삭제                
                    span | 
                a(href="/steam") 목록 
                span | 댓글 ()
        div.notice__main-content
            span.notice__main-content__title=steam.title             
            video.steam__main-content__video(controls src=`/${steam.fileUrl}`)
            span.notice__main-content__main=steam.description
            div.steam__main-rating
                div.steam__main-rating__like
                    span.steam__main-rating-like(OnClick=`location.href="/steam/${steam._id}/like"`) 👍
                    span.steam__main-rating-rate=steam.like.like
                iv.steam__main-rating__dislike
                    span.steam__main-rating-dislike(OnClick=`location.href="/steam/${steam._id}/dislike"`) 👎
                    span.steam__main-rating-rate=steam.like.dislike

    div.steam__main-comment
        div.steam__main-comment__count
            i.far.fa-comment
            span.steam__main-comment__count-comments 댓글(0)
        div.steam__main-comment__item
            each comment in comments 
                +comment(comment)
            else 
                span 아직 작성된 댓글이 없습니다. 
        div.steam__main-comment__form
            form.steam__main-comment__form-container(action=`/api/steams/${steam._id}/comment` method="POST")
                div.steam__main-comment__form-container__text
                    textarea(rows="3" name="comment")
                div.steam__main-comment__form-container__submit
                    input(type="submit" value="등록")
              
    if errorMessage
        script.         
            alert(`#{errorMessage}`)

    