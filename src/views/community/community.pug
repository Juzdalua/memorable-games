extends ../layouts/base.pug
include ../mixins/comment-mixin.pug

block content 
    div.notice__main 
        div.notice__main-header
            span=article.owner.userid 
            span=String(article.createAt).substr(4,20)
            span ì¡°íšŒ: #{article.views}        
            div
                if loggedInUser._id === String(article.owner._id)
                    a(href=`/articles/${article._id}/modify`) ìˆ˜ì • 
                    span | 
                    a(href=`/articles/${article._id}/delete`) ì‚­ì œ                
                    span | 
                a(href="/articles") ëª©ë¡ 
                span | ëŒ“ê¸€(#{article.comments.length})
        div.notice__main-content
            span.notice__main-content__title=article.title             
            img.article__main-content__img(src=`/${article.fileUrl}` alt="")
            span.notice__main-content__main=article.description
            div.steam__main-rating
                div.steam__main-rating__like
                    span.steam__main-rating-like(OnClick=`location.href="/articles/${article._id}/like"`) ğŸ‘
                    span.steam__main-rating-rate=article.like.like
                iv.steam__main-rating__dislike
                    span.steam__main-rating-dislike(OnClick=`location.href="/articles/${article._id}/dislike"`) ğŸ‘
                    span.steam__main-rating-rate=article.like.dislike

    div.steam__main-comment
        div.steam__main-comment__count
            i.far.fa-comment
            span.steam__main-comment__count-comments ëŒ“ê¸€(#{article.comments.length})
        div.steam__main-comment__item
            each comment in comments 
                +comment(comment)
            else 
                span ì•„ì§ ì‘ì„±ëœ ëŒ“ê¸€ì´ ì—†ìŠµë‹ˆë‹¤. 
        div.steam__main-comment__form
            form.steam__main-comment__form-container(action=`/api/articles/${article._id}/comment` method="POST")
                div.steam__main-comment__form-container__text
                    textarea(rows="3" name="comment")
                div.steam__main-comment__form-container__submit
                    input(type="submit" value="ë“±ë¡")
              
    if errorMessage
        script.         
            alert(`#{errorMessage}`)

    